language: python
python:
  - "2.7"
matrix:
  include:
    - os: linux
      dist: trusty
      after_success:
        - pip install codecov -e .
        - coverage run --source=src/sysl -m py.test
        - codecov
    - os: osx
      osx_image: xcode8.3
      language: generic
      before_install:
        - brew update
        - brew list python >/dev/null 2>&1 || brew install python
        - brew list gradle >/dev/null 2>&1 || brew install gradle
        - export PATH=/usr/local/opt/python/libexec/bin:$PATH

env:
  - SYSL_PLANTUML=http://www.plantuml.com/plantuml

install:
  - pip install . pytest flake8

script:
  - flake8
  - pytest
  - gradle test -b test/java/build.gradle
