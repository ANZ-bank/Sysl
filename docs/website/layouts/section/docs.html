{{ define "title"}} {{ .Title}} {{end}}
{{ define "header"}} {{ partial "header" .}} {{end}}
{{ define "main"}}
{{$parentDir := .Dir}}
{{$this := .Page}}

<div id="main">
  <div id="hero">
    <h1>{{.Title}}</h1>
  </div>
  <div id="components">
    <div class="row gutters">
      <!-- only show pages where dir is the same as the _index.md -->
      
      {{ $pages := where .Site.Pages ".Dir" $parentDir }}
      {{ $pages := $pages | union (where .Site.Pages ".File.LogicalName" "_index.md") }}

      {{ range $pages}}
      {{if .IsDescendant $this}}
      <div class="col col-4 item">
        <h4><a href="{{ .Permalink }}">{{ .Title }}</a></h4>
        <p>{{ .Params.description }}</p>
        <p>{{.Dir}}</p>
      </div>
      {{ end }}
      {{ end }}

    </div>
  </div>
</div>
{{ end }}


{{ define "footer"}} {{ partial "footer" .}} {{end}}