+++
# AUTOGENERATED BY byexample/generate.go
title= "Code-Generation"
draft= false
description= ""
layout= "byexample"
weight = 14
topic = "Code Generation"
PlaygroundURL = "http://anz-bank.github.io/sysl-playground/?input=&cmd="
GitRepoURL = "https://github.com/anz-bank/sysl/tree/master/demo/examples/Code-Generation"
ID = "code-generation"
CodeWithoutComments = """"""

Segs = [[
  
      {CodeEmpty= true,CodeLeading= true,CodeRun= false,CodeRendered="""""",DocsRendered= """<p>Simple REST endpoint generation in go</p>
""",Image = ""},

      {CodeEmpty= true,CodeLeading= true,CodeRun= true,CodeRendered="""""",DocsRendered= """<p>This demonstrates how to develop a simple sysl app without any dependencies or external calls</p>
""",Image = ""},

      {CodeEmpty= true,CodeLeading= true,CodeRun= false,CodeRendered="""""",DocsRendered= """<p>Note; most of the tutorials in the &ldquo;Code-Generation&rdquo; section are going to have a lot of repeated code</p>
""",Image = ""},

      {CodeEmpty= true,CodeLeading= true,CodeRun= false,CodeRendered="""""",DocsRendered= """<p>But everything is included in each tutorial for completeness</p>
""",Image = ""},

      {CodeEmpty= true,CodeLeading= false,CodeRun= false,CodeRendered="""""",DocsRendered= """<p>Refer to a full example repo at <a href="https://github.com/anz-bank/sysl-template">https://github.com/anz-bank/sysl-template</a></p>
""",Image = ""},


],
[
  
      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="kn">import</span> <span class="p">..</span><span class="o">/</span><span class="nx">swagger2</span><span class="o">-</span><span class="nx">spec</span><span class="o">/</span><span class="nx">jsonplaceholder</span><span class="p">.</span><span class="nx">json</span> <span class="nx">as</span> <span class="nx">jsonplaceholder</span> <span class="err">~</span><span class="nx">swagger</span></pre>""",DocsRendered= """<p>simple.sysl</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= true,CodeRendered="""<pre class="chroma">
<span class="nx">jsonplaceholder</span><span class="p">:</span>
    <span class="err">@</span><span class="kn">package</span> <span class="p">=</span> <span class="s">&#34;jsonplaceholder&#34;</span></pre>""",DocsRendered= """<p>Define an application and specify the <code>package</code> attribute and the @basePath attribute</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="nx">simple</span><span class="p">:</span>
    <span class="err">@</span><span class="kn">package</span><span class="p">=</span><span class="s">&#34;simple&#34;</span></pre>""",DocsRendered= """<p>Define an application and specify the <code>package</code> attribute and the @basePath attribute</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="p">!</span><span class="kd">type</span> <span class="nx">Welcome</span><span class="p">:</span>
        <span class="nx">Content</span> <span class="p">&lt;:</span> <span class="kt">string</span></pre>""",DocsRendered= """<p>Wrap the types in sysl types</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="o">/</span><span class="p">:</span>
        <span class="nx">GET</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">ok</span> <span class="p">&lt;:</span> <span class="nx">Welcome</span></pre>""",DocsRendered= """<p>First endpoint returns a Welcome type</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= false,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="o">/</span><span class="nx">foobar</span><span class="p">:</span>
        <span class="nx">GET</span><span class="p">:</span>
            <span class="nx">jsonplaceholder</span> <span class="o">&lt;-</span> <span class="nx">GET</span> <span class="o">/</span><span class="nx">todos</span><span class="o">/</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span>
            <span class="k">return</span> <span class="nx">ok</span> <span class="p">&lt;:</span> <span class="nx">jsonplaceholder</span><span class="p">.</span><span class="nx">todosResponse</span></pre>""",DocsRendered= """<p>Second endpoint returns a todosResponse type</p>
""",Image = ""},


],
[
  
      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="err">#</span><span class="p">!</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">bash</span></pre>""",DocsRendered= """<p>Make sure that you use the Makefile that is used in this demonstration, (or go to <a href="https://github.com/anz-bank/sysl-template/blob/master/makefile">https://github.com/anz-bank/sysl-template/blob/master/makefile</a>)</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= true,CodeRendered="""<pre class="chroma">
<span class="nx">all</span><span class="p">:</span> <span class="nx">sysl</span></pre>""",DocsRendered= """<p>We need to edit our makefile and add the following lines at the top:</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="nx">input</span> <span class="p">=</span> <span class="nx">simple</span><span class="p">.</span><span class="nx">sysl</span>
<span class="nx">app</span> <span class="p">=</span> <span class="nx">simple</span>
<span class="nx">down</span> <span class="p">=</span>  <span class="err">#</span> <span class="nx">this</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">a</span> <span class="nx">list</span> <span class="nx">separated</span> <span class="nx">by</span> <span class="nx">a</span> <span class="nx">space</span> <span class="nx">or</span> <span class="nx">left</span> <span class="nx">empty</span>
<span class="nx">out</span> <span class="p">=</span> <span class="nx">gen</span></pre>""",DocsRendered= """<p>Current go import path, this should be what&rsquo;s in your go.mod plus the path you&rsquo;re in</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="nx">basepath</span> <span class="p">=</span> <span class="nx">github</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">anz</span><span class="o">/</span><span class="nx">sysl</span><span class="o">/</span><span class="nx">syslbyexample</span><span class="o">/</span><span class="nx">_examples</span><span class="o">/</span><span class="nx">Code</span><span class="o">-</span><span class="nx">Generation</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="nx">make</span> <span class="nx">input</span><span class="p">=</span><span class="nx">simple</span><span class="p">.</span><span class="nx">sysl</span> <span class="nx">app</span><span class="p">=</span><span class="nx">simple</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= false,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="nx">ls</span> 
<span class="err">#</span><span class="nx">gen</span>             <span class="nx">implementation</span>  <span class="nx">makefile</span>        <span class="nx">readme</span><span class="p">.</span><span class="nx">md</span>
<span class="err">#</span><span class="nx">generate</span><span class="p">.</span><span class="nx">sh</span>     <span class="nx">main</span><span class="p">.</span><span class="k">go</span>         <span class="nx">ordering</span><span class="p">.</span><span class="nx">yaml</span>   <span class="nx">simple</span><span class="p">.</span><span class="nx">sysl</span></pre>""",DocsRendered= """<p>Now we can see that there is a &ldquo;gen&rdquo; folder with our generated sysl files</p>
""",Image = ""},


],
[
  
      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="kn">package</span> <span class="nx">server</span></pre>""",DocsRendered= """<p>server.go contains all the manual config code that is used to implement the generated sysl</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= true,CodeRendered="""<pre class="chroma"><span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;context&#34;</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;log&#34;</span>
    <span class="s">&#34;net/http&#34;</span>
    <span class="s">&#34;os&#34;</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="s">&#34;github.com/anz-bank/sysl/demo/examples/Code-Generation/gen/jsonplaceholder&#34;</span>
    <span class="s">&#34;github.com/anz-bank/sysl/demo/examples/Code-Generation/gen/simple&#34;</span>
    <span class="s">&#34;github.com/anz-bank/sysl/demo/examples/Code-Generation/pkg/defaultcallback&#34;</span>
    <span class="s">&#34;github.com/go-chi/chi&#34;</span>
<span class="p">)</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="kd">func</span> <span class="nf">LoadServices</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">router</span> <span class="o">:=</span> <span class="nx">chi</span><span class="p">.</span><span class="nf">NewRouter</span><span class="p">()</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="nx">simpleServiceInterface</span> <span class="o">:=</span> <span class="nx">simple</span><span class="p">.</span><span class="nx">ServiceInterface</span><span class="p">{</span>
        <span class="nx">GetFoobarList</span><span class="p">:</span> <span class="nx">GetFoobarList</span><span class="p">,</span>
        <span class="nx">Get</span><span class="p">:</span>           <span class="nx">GetHandler</span><span class="p">,</span>
    <span class="p">}</span></pre>""",DocsRendered= """<p>simpleServiceInterface is the struct which is composed of our functions we wrote in <code>methods.go</code>Struct embedding is used for the Service interface (yes, not interfaces)</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="nx">genCallbacks</span> <span class="o">:=</span> <span class="nx">defaultcallback</span><span class="p">.</span><span class="nf">DefaultCallback</span><span class="p">()</span></pre>""",DocsRendered= """<p>Default callback behaviour</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="nx">serviceHandler</span> <span class="o">:=</span> <span class="nx">simple</span><span class="p">.</span><span class="nf">NewServiceHandler</span><span class="p">(</span>
        <span class="nx">genCallbacks</span><span class="p">,</span>
        <span class="o">&amp;</span><span class="nx">simpleServiceInterface</span><span class="p">,</span>
        <span class="nx">jsonplaceholder</span><span class="p">.</span><span class="nf">NewClient</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">DefaultClient</span><span class="p">,</span> <span class="s">&#34;http://jsonplaceholder.typicode.com&#34;</span><span class="p">))</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="nx">serviceRouter</span> <span class="o">:=</span> <span class="nx">simple</span><span class="p">.</span><span class="nf">NewServiceRouter</span><span class="p">(</span><span class="nx">genCallbacks</span><span class="p">,</span> <span class="nx">serviceHandler</span><span class="p">)</span>
    <span class="nx">serviceRouter</span><span class="p">.</span><span class="nf">WireRoutes</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">router</span><span class="p">)</span></pre>""",DocsRendered= """<p>Service Router</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="nx">port</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;PORT&#34;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">port</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
        <span class="nx">port</span> <span class="p">=</span> <span class="s">&#34;8080&#34;</span>
    <span class="p">}</span>
    <span class="nx">serverAddress</span> <span class="o">:=</span> <span class="s">&#34;:&#34;</span> <span class="o">+</span> <span class="nx">port</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Starting Server on &#34;</span> <span class="o">+</span> <span class="nx">serverAddress</span><span class="p">)</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="nx">serverAddress</span><span class="p">,</span> <span class="nx">router</span><span class="p">))</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="kd">func</span> <span class="nf">GetHandler</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">simple</span><span class="p">.</span><span class="nx">GetRequest</span><span class="p">,</span> <span class="nx">client</span> <span class="nx">simple</span><span class="p">.</span><span class="nx">GetClient</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">simple</span><span class="p">.</span><span class="nx">Welcome</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">welcome</span> <span class="o">:=</span> <span class="nx">simple</span><span class="p">.</span><span class="nx">Welcome</span><span class="p">{</span>
        <span class="nx">Content</span><span class="p">:</span> <span class="s">&#34;Hello World!&#34;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">welcome</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span></pre>""",DocsRendered= """<p>GetHandler refers to the endpoint in our sysl file</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="kd">func</span> <span class="nf">GetFoobarList</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">simple</span><span class="p">.</span><span class="nx">GetFoobarListRequest</span><span class="p">,</span> <span class="nx">client</span> <span class="nx">simple</span><span class="p">.</span><span class="nx">GetFoobarListClient</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">jsonplaceholder</span><span class="p">.</span><span class="nx">TodosResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span></pre>""",DocsRendered= """<p>GetFoobarList refers to the endpoint in our sysl file</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= false,CodeRun= false,CodeRendered="""<pre class="chroma">
    <span class="nx">ans</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">GetTodos</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">jsonplaceholder</span><span class="p">.</span><span class="nx">GetTodosRequest</span><span class="p">{</span><span class="nx">ID</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ans</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">ans</span><span class="p">,</span> <span class="nx">err</span>
<span class="p">}</span></pre>""",DocsRendered= """<p>Here we can make a request on the client object which was generated from the call to &ldquo;myDownstream&rdquo; in the sysl modelWe will get the id equal to one, which was generated from out {id} from /todos/{id&lt;:int}</p>
""",Image = ""},


],
[
  
      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="kn">package</span> <span class="nx">main</span></pre>""",DocsRendered= """<p>main.go</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= true,CodeRendered="""<pre class="chroma"><span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;context&#34;</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="s">&#34;github.com/anz-bank/sysl/demo/examples/Code-Generation/internal/server&#34;</span>
<span class="p">)</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span></pre>""",DocsRendered= """<p>Now the LoadServices function is called to start our server</p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= false,CodeRun= false,CodeRendered="""<pre class="chroma">    <span class="nx">server</span><span class="p">.</span><span class="nf">LoadServices</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
<span class="p">}</span></pre>""",DocsRendered= """""",Image = ""},


],
[
  
      {CodeEmpty= false,CodeLeading= true,CodeRun= false,CodeRendered="""<pre class="chroma"><span class="err">#</span><span class="p">!</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">bash</span></pre>""",DocsRendered= """""",Image = ""},

      {CodeEmpty= false,CodeLeading= true,CodeRun= true,CodeRendered="""<pre class="chroma">
<span class="k">go</span> <span class="nx">run</span> <span class="nx">main</span><span class="p">.</span><span class="k">go</span></pre>""",DocsRendered= """<p>Run your application</p>
""",Image = ""},

      {CodeEmpty= true,CodeLeading= true,CodeRun= false,CodeRendered="""""",DocsRendered= """<p>Test the server with curl or open the browser to <a href="http://localhost:8080">http://localhost:8080</a></p>
""",Image = ""},

      {CodeEmpty= false,CodeLeading= false,CodeRun= false,CodeRendered="""<pre class="chroma">
<span class="nx">curl</span> <span class="nx">localhost</span><span class="p">:</span><span class="mi">8080</span></pre>""",DocsRendered= """<p>The response should be {&ldquo;Content&rdquo;:&ldquo;Hello World!&rdquo;}</p>
""",Image = ""},


],

]
+++


